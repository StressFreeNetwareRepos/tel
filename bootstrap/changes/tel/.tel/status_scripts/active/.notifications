#!/data/data/com.termux/files/usr/bin/python3.8
# Script to format android notifications from termux api
# SealyJ
# required pip pkgs: colorama
import json
import os
import subprocess
import sys
from colorama import init, Fore, Back, Style

init()

#print(Fore.GREEN + 'green, '
 #           + Fore.RED + 'red, '
  #              + Fore.RESET + 'normal, '
   #                 , end='')
#print(Back.GREEN + 'green, '
 #           + Back.RED + 'red, '
  #              + Back.RESET + 'normal, '
   #                 , end='')
#print(Style.DIM + 'dim, '
 #           + Style.BRIGHT + 'bright, '
  #              + Style.NORMAL + 'normal'
   #                 , end=' ')
#print()
displayList = ("com.twitter.android", "com.instagram.android", "org.telegram.messenger", "com.spotify.music", "com.whatsapp", "com.snapchat.android")

def pickColor(num,notifications):
    if notifications[num]["packageName"] == "com.twitter.android":
        return Fore.CYAN
    elif notifications[num]["packageName"] == "com.instagram.android":
        return Fore.MAGENTA
    elif notifications[num]["packageName"] == "org.telegram.messenger":
        return Fore.BLUE
    elif notifications[num]["packageName"] == "com.spotify.music":
        return Fore.GREEN
    elif notifications[num]["packageName"] == "com.whatsapp":
        return Fore.GREEN
    elif notifications[num]["packageName"] == "com.snapchat.android":
        return Fore.YELLOW
    else:
        return Style.RESET_ALL
#get notifs from termux api
termuxNotifs = subprocess.run("termux-notification-list", stdout=subprocess.PIPE, universal_newlines=True, timeout=10)
notifications = termuxNotifs.stdout
#load as json to list
notifications = json.loads(notifications)

#print from key from dict from list
for n in range(0,len(notifications)):
    if notifications[n]["packageName"] in displayList:
        print(pickColor(n,notifications) + notifications[n]["title"] + ": " + Fore.RESET + notifications[n]["content"])

#debug
#print("type is:", type(notifications))
#print("end of script")
